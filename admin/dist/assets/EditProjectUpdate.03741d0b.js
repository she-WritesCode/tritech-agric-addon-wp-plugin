import{S as l,A as i,P,_ as y}from"./index.9e2b1845.js";import{B as n,C as c,a5 as S,d as x,r as u,J as C,Q as E,O as U,i as T,g as A,o as B,c as R,a as p,l as w,u as O}from"./vendor.bb70436b.js";const $=s=>[{label:"Project",name:"project.id",as:"select",class:"md:col-span-2",children:s.map(e=>({tag:"option",text:e.title,value:e.id}))},{label:"Title",name:"title",as:"InputText",class:"md:col-span-2",autofocus:!0},{label:"Stage",name:"stage",as:"InputText",class:"md:col-span-1"},{label:"Content",name:"content",as:"Editor",class:"md:col-span-2",editorStyle:"height: 15rem;"}];var q=(s={},e=[])=>({fields:$(e),validation:n({title:c().required(),stage:c().optional(),content:c().required(),project:n({id:S().required()})}),values:s,class:"grid gap-4 md:grid-cols-2 mb-8",buttonLabel:"Add Project",buttonLoadingLabel:"Submitting...",buttonClass:"ml-auto",showResetButton:!0,buttonsContainerClass:"flex justify-between gap-4"});const F={class:"create-project"},J={class:"create-project-form"},D=x({setup(s){const e=u(),r=new l(i.PROJECT_UPDATES,!0),a=C(),m=E(),f=U(),d=u([]),v=new l(i.PROJECTS,!0),h=()=>{v.getAll().then(t=>{d.value=t,a.add({severity:"info",detail:"Projects fetched",life:3e3})}).catch(()=>{a.add({severity:"error",detail:"Failed to fetch Projects",life:5e3})})},j=()=>{r.getOne(f.params.id).then(t=>{e.value=t}).catch(()=>{a.add({severity:"error",detail:"Failed to fetch Project Update",life:5e3})})};T(()=>{h(),j()});const _=A(()=>q(e.value,d.value||[])),b=t=>{var o;r.update(((o=e.value)==null?void 0:o.id)||"",t).then(g=>{e.value=g,m.push({name:"EditProjectUpdate",params:{id:e.value.id}}),a.add({severity:"success",detail:`Successfully updated ${e.value.title}`,life:3e3})}).catch(()=>{a.add({severity:"error",detail:"Failed to update project update",life:5e3})})};return(t,o)=>(B(),R("div",F,[p(P,{title:"Edit Project Update"}),w("div",J,[p(y,{schema:O(_),"submit-fn":b},null,8,["schema"])])]))}});export{D as default};
