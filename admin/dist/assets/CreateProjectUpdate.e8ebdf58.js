import{S as l,A as n,P as h,_ as b}from"./index.9e2b1845.js";import{B as d,C as o,a5 as g,d as P,r as i,J as S,Q as y,i as C,g as x,o as T,c as U,a as u,l as E,u as w}from"./vendor.bb70436b.js";const A=t=>[{label:"Project",name:"project.id",as:"select",class:"md:col-span-2",children:t.map(e=>({tag:"option",text:e.title,value:e.id}))},{label:"Title",name:"title",as:"InputText",class:"md:col-span-2",autofocus:!0},{label:"Stage",name:"stage",as:"InputText",class:"md:col-span-1"},{label:"Content",name:"content",as:"Editor",class:"md:col-span-2",editorStyle:"height: 15rem;"}];var B=(t=[])=>({fields:A(t),validation:d({title:o().required(),stage:o().optional(),content:o().required(),project:d({id:g().required()})}),values:{},class:"grid gap-4 md:grid-cols-2 mb-8",buttonLabel:"Add Project",buttonLoadingLabel:"Submitting...",buttonClass:"ml-auto",showResetButton:!0,buttonsContainerClass:"flex justify-between gap-4"});const R={class:"create-project"},$={class:"create-project-form"},L=P({setup(t){const e=i(),p=new l(n.PROJECT_UPDATES,!0),a=S(),m=y(),c=i([]),f=new l(n.PROJECTS,!0),v=()=>{f.getAll().then(s=>{c.value=s,a.add({severity:"info",detail:"Projects fetched",life:3e3})}).catch(()=>{a.add({severity:"error",detail:"Failed to fetch Projects",life:5e3})})};C(()=>{v()});const _=x(()=>B(c.value)),j=s=>{p.create(s).then(r=>{e.value=r,a.add({severity:"success",detail:`Successfully added ${e.value.title}`,life:3e3}),m.push({name:"EditProjectUpdate",params:{id:e.value.id}})}).catch(()=>{a.add({severity:"error",detail:"Failed to add project update",life:5e3})})};return(s,r)=>(T(),U("div",R,[u(h,{title:"New Project Update"}),E("div",$,[u(b,{schema:w(_),"submit-fn":j},null,8,["schema"])])]))}});export{L as default};
