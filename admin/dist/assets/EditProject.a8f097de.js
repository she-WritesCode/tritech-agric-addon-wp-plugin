var x=Object.defineProperty,S=Object.defineProperties;var P=Object.getOwnPropertyDescriptors;var p=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable;var b=(a,e,t)=>e in a?x(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,v=(a,e)=>{for(var t in e||(e={}))I.call(e,t)&&b(a,t,e[t]);if(p)for(var t of p(e))T.call(e,t)&&b(a,t,e[t]);return a},f=(a,e)=>S(a,P(e));import{S as q,A as C,P as E,_ as B}from"./index.58e22516.js";import{B as D,C as s,a4 as L,a5 as l,d as g,r as R,J as $,O as k,i as A,j as w,o as r,c as i,a as c,u as F}from"./vendor.bb70436b.js";const O=[{label:"Title",name:"title",as:"InputText",class:"md:col-span-2",autofocus:!0},{label:"Project Status",name:"status",as:"select",class:"md:col-span-2",children:[{tag:"option",text:"pending"},{tag:"option",text:"in progress"},{tag:"option",text:"completed"}]},{label:"Slug (URL-friendly name of your project)",name:"slug",as:"InputText",class:"md:col-span-1",disabled:!0},{label:"Project Image URL",name:"image",as:"InputText",class:"md:col-span-1",disabled:!1},{label:"Summary",name:"shortDescription",as:"Editor",class:"md:col-span-2",editorStyle:"height: 10rem;"},{label:"Full Description",name:"description",as:"Editor",class:"md:col-span-2",editorStyle:"height: 15rem;"},{label:"Investment fee (\u20A6)",name:"fee",as:"InputText",type:"number",class:"md:col-span-1"},{label:"Return on Investment (%)",name:"roi",as:"InputText",type:"number",class:"md:col-span-1"},{label:"Project Location (e.g. Epe, Lagos)",name:"location",as:"InputText",class:"md:col-span-1"},{label:"Total Slots",name:"totalSlots",as:"InputText",type:"number",class:"md:col-span-1"},{label:"Available Slots",name:"availableSlots",as:"InputText",type:"number",class:"md:col-span-1"},{label:"Project Duration (months)",name:"duration",as:"InputText",type:"number",class:"md:col-span-1"},{label:"Project Start Date",name:"startDate",type:"date",as:"InputText",class:"md:col-span-1"},{label:"Slots Capacity (e.g. '120 fishes')",name:"slotsCapacity",as:"InputText",class:"md:col-span-1"},{label:"Insured By (name of insurance company)",name:"insuredBy",as:"InputText",class:"md:col-span-1"}];var _=a=>({fields:O,validation:D({title:s().required(),slug:s().required(),description:s().required(),image:L().required(),shortDescription:s().required(),fee:l().min(0).required(),roi:l().min(0).max(100).required(),location:s().required(),slotsCapacity:s().required(),totalSlots:l().min(0).required(),availableSlots:l().min(0).required().nullable(),duration:l().min(0).required(),insuredBy:s().required(),startDate:s().required()}),values:a,class:"grid gap-4 md:grid-cols-2 mb-8",buttonLabel:"Update Project",buttonLoadingLabel:"Submitting...",buttonClass:"ml-auto",showResetButton:!0,buttonsContainerClass:"flex justify-between gap-4"});const U={class:"create-project"},J={key:0,class:"create-project-form"},H={key:1},M=g({name:"EditProject"}),G=g(f(v({},M),{setup(a){const e=R(),t=new q(C.PROJECTS,!0),o=$(),y=k();let u=_(e.value);const h=n=>{!e.value||t.update(e.value.id,n).then(m=>{e.value=m,d(),o.add({severity:"success",detail:`${e.value.title} updated`,life:3e3})}).catch(()=>{o.add({severity:"error",detail:"Failed to edit project",life:3e3})})},d=()=>{t.getOne(y.params.id).then(n=>{e.value=n,u=_(e.value)}).catch(()=>{o.add({severity:"error",detail:"Failed to fetch Project",life:5e3})})};return A(()=>{d()}),(n,m)=>{const j=w("ProgressSpinner");return r(),i("div",U,[c(E,{title:`Edit ${e.value?e.value.title:"Project"}`},null,8,["title"]),e.value?(r(),i("div",J,[c(B,{schema:F(u),"submit-fn":h},null,8,["schema"])])):(r(),i("div",H,[c(j)]))])}}}));export{G as default};
